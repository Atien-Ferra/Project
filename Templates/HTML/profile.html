{% extends "base.html" %}

{% block title %}Profile{% endblock %}
{% block nav_links %}
    <a class="nav-link" href="{{ url_for('quiz.dashboard') }}">Dashboard</a>
{% endblock %}
{% block scripts %}
<script src="{{ url_for('static', filename='JS/profile.js') }}"></script>
{% endblock %}
{% block content %}
<div class="row justify-content-center mt-5">
  <div class="col-md-8">
    <h1 class="text-center">Profile</h1>
    <div class="card">
      <div class="card-body">
        <form id="update-profile-form" method="POST">
          <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
          <div class="mb-3">
            <label class="form-label"><strong>Name:</strong></label>
            <p>{{ profile.displayName }}</p>
          </div>
          <div class="mb-3">
            <label class="form-label"><strong>Email:</strong></label>
            <p>{{ profile.email }}</p>
          </div>
          <div class="mb-3">
            <label class="form-label"><strong>Streak:</strong></label>
            <p>{{ profile.streak }}</p>
          </div>
          <div class="mb-3">
            <label class="form-label"><strong>Quizzes Taken:</strong></label>
            <p>{{ profile.quizzes_taken }}</p>
          </div>
          <div class="mb-3">
            <label class="form-label"><strong>Tasks Completed:</strong></label>
            <p>{{ profile.tasks_done }}</p>
          </div>
          <div class="mb-3">
            <label class="form-label"><strong>Session Length (mins):</strong></label>
            <p id="sessionLengthText">{{ profile.studyPrefs.sessionLengthMins }}</p>
            <input type="number" id="sessionLengthInput" name="studyPrefs.sessionLengthMins" class="form-control d-none" value="{{ profile.studyPrefs.sessionLengthMins }}" required>
          </div>
          <div class="mb-3">
            <label class="form-label"><strong>Break Length (mins):</strong></label>
            <p id="breakLengthText">{{ profile.studyPrefs.breakLongMins }}</p>
            <input type="number" id="breakLengthInput" name="studyPrefs.breakLongMins" class="form-control d-none" value="{{ profile.studyPrefs.breakLongMins }}" required>
          </div>
          <div class="mb-3">
            <label class="form-label"><strong>Preferred Difficulty:</strong></label>
            <p id="preferredDifficultyText">{{ profile.studyPrefs.preferredDifficulty }}</p>
            <select id="preferredDifficultyInput" name="studyPrefs.preferredDifficulty" class="form-control d-none" required>
              <option value="easy" {% if profile.studyPrefs.preferredDifficulty == 'easy' %}selected{% endif %}>Easy</option>
              <option value="medium" {% if profile.studyPrefs.preferredDifficulty == 'medium' %}selected{% endif %}>Medium</option>
              <option value="hard" {% if profile.studyPrefs.preferredDifficulty == 'hard' %}selected{% endif %}>Hard</option>
            </select>
          </div>
          <button type="button" id="editButton" class="btn btn-secondary">Edit</button>
          <button type="submit" id="saveButton" class="btn btn-primary d-none">Save Changes</button>
          <button type="button" id="cancelButton" class="btn btn-danger d-none">Cancel</button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
